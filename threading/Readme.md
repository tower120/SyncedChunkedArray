Copy of https://github.com/tower120/threading